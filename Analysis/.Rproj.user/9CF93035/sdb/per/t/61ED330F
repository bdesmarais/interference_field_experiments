{
    "contents" : "#10,000 Random Assignments for B&N\n\nrm(list=ls())\n# Set your working directory\n# setwd(\"\")\n \nlibrary(foreign)\n#butler <- read.dta(\"nm.replication.dta\")\nbutler <- read.table(\"nm.replication.tab\", sep=\"\\t\")\n\n\n### Random assignment using the matching categories defined by B&N\n\nblock.ra <- function(blockvar, m=NULL){\n  if(!all(mean(table(blockvar))==table(blockvar))){stop(\"Blocks not equal size\")}\n  assign <- rep(NA, length(blockvar))\n  blocks <- unique(blockvar)\n  for(k in 1:length(blocks)){\n    N.block <- length(assign[blockvar==blocks[k]])\n    m.block <- floor(N.block/2)\n    if(!is.null(m)){m.block<-m}\n    assign[blockvar==blocks[k]] <- ifelse(1:N.block %in% sample(1:N.block,m.block),1,0)\n  }\n  return(assign)\n}\n\nset.seed(1234567)  \nZ_block <- replicate(10000, block.ra(blockvar=butler$match_category))\n\nsave(Z_block,file=\"CoppockJEPS_10000randomizations.rdata\")\n",
    "created" : 1445529354395.000,
    "dirty" : false,
    "encoding" : "ISO8859-1",
    "folds" : "",
    "hash" : "3599203402",
    "id" : "61ED330F",
    "lastKnownWriteTime" : 1445529270,
    "path" : "D:/Dropbox/Interference_in_Field_Experiments/Analysis/coppock_replication_data/CoppockJEPS_10000Randomizations.R",
    "project_path" : "coppock_replication_data/CoppockJEPS_10000Randomizations.R",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "type" : "r_source"
}